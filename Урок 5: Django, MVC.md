## Основы 
Давайте объединим наши знания о серверах из прошлого урока со знаниями о *Django-фреймворке*.

Когда на сервер приходит запрос, он *переадресуется* Django, который уже пытается сообразить, что же конкретно от него просят. Для начала он берет адрес веб-страницы и пробует понять — что же нужно сделать. 

Эту часть процесса в Django выполняет **urlresolver** — расшифровывается, как определитель URL. Он не слишком умён, поэтому просто берет список шаблонов и пытается сопоставить их с URL. Django сверяет шаблоны сверху вниз и, если что-то совпадает, он переправляет запрос соответствующей функции – view.

Там внутри происходит самое интересное. Оттуда идут обращения к базе данных за определенной информацией. Может быть пользователь попросил изменить какую-нибудь информацию? Как будто в письме написано: "Пожалуйста, поменяйте описание моей работы." Функция **view** может проверить, имеете ли вы разрешение делать это, а затем обновит описание работы и отправит обратно ответ: "Готово!". Затем функция **view** сгенерирует ответ, и Django сможет отправить его веб-браузеру пользователя.
  
[Статья на Википедии про MVC](https://www.wikiwand.com/ru/Model-View-Controller)

[Статья по Django MTV](https://djbook.ru/ch05s02.html)


## Устанавливаем Django

Для установки Django мы будет использовать уже знакомый нам **pipenv**.

Из нашей директории *shop_demo* вводим команду _`pipenv install django`_. Если еще не активировали среду, то сделайте это.

Файл **Pipfile** нужно будет закинуть в .*gitignore*. В Гит добавляют только файл **Pipfile.lock**. Его можно создать командой _`pipenv lock`_. Он будет хранить всю информацию о библиотеках, установленных в вашу среду. Так, если накопится много библиотек — их не придется все устанавливать по одной, если захотите поднять свой проект на новом компьютере.

Если мы все сделали правильно, то у нас установилась последняя версия Django – **2.0.7**. Теперь, находясь в директории **shop_demo**, мы можем создать новый Django-проект:

_`django-admin startproject shop_project .`_. Не забудьте точку в конце. Там **shop_project** — название нашего проекта. А точка — нынешняя директория, где мы его хотим создать.

## Структура проекта

Посмотрим какую структуру мы получили:

```text           
shop_demo/ 
  manage.py 
  bot/
	  main.py
  shop_project/ 
    __init__.py 
    settings.py 
    urls.py 
    wsgi.py
```   
          
Самая верхняя **shop_demo** — основная директория нашего проекта. Дальше внутри него находится файл **manage.py** — скрипт для управления нашим проектом – он будем заменять скрипт **django-admin**, который мы вызывали выше. 

Рядом будет находиться директория **bot**, куда мы положили нашего бота.

**shop_project** — наша директория с настройками *проекта* и *урлов*. В нее входят файлы:

**settings.py** – наш основной файл настроек, он большой, но и разбираться в нем пока не нужно. 

**urls.py** — все урлы для нашего сайта мы будем настраивать здесь, так Джанго поймет как связать ссылку и Вью.

**__init.py__** — файл, который должен находится в любой вложенной директории c Python-кодом, чтобы она была доступна для импорта. Это правило для всего Питон-кода, не только Джанго. 

**wsgi.py** — его просто не трогаем, он понадобится, когда будем выгружать сайт на сервер.

Наш сервер готов к запуску. Из директории **shop_demo** вводим команду:

_`python manage.py runserver`_ — запустит наш сервер на **127.0.0.1:8000**. Пока он умеет отображать только страницу-заглушку, но скоро мы это исправим.

## Джанго-приложения

Джанго-проект состоит из приложений. Хоть это и звучит громоздко, на самом деле приложения должны быть небольшими и иметь конкретную задачу.

Представим себе проект **магазина мороженного**, он может состоять из таких приложений: **flavors** — приложение для управления всеми вкусами и их отображением на сайте; **blog** — приложение блога (написание и отображение постов); **events** — приложение для событий, добавление к дате и отображение в календаре.

Это все абстрактный пример, не страшно если вы его не до конца поняли. В нашем проекте пока что будет одно приложение, мы можем его создать так из директории с файлом **manage.py**:

_`python manage.py startapp shop_app`_

Это не лучшее название для приложения, но так мы сможем не путаться. Директория с файлами проекта будет называться **shop_project**, а директория нашего приложения будет называться **shop_app**:

```text           
shop_app/ 
  __init__.py 
  admin.py 
  apps.py 
  migrations/ 
    __init__.py 
  models.py 
  tests.py 
  views.py
```            
          
Про **__init__.py** мы уже поговорили выше. **admin.py** — файл для настроек отображения нашего приложения в админке. 

**apps.py** — файл базовых настроек нашего приложения.

**migrations** — папка с нашими миграциями, про них мы будем говорить ниже. 

Файл моделей для нашего приложения — **models.py**. 

Для тестов используется **tests.py** — про них мы поговорим на самом последнем этапе. 

**views.py** — файл для наших функций, которые будут обрабатывать запросы пользователя.

Вроде разобрались, столько всего нового. В следующем уроке уже начнем применять эти знания.

## Итоги

Мы узнали, что такое *MVC*. Установили Джанго и посмотрели на структуру Джанго-проекта. Теперь можем начинать разрабатывать свой сайт.

Мы создали проект — **shop_project** и добавили в него приложение **shop_app**. 

• • •

# Почаще задавайте вопросы в чате — там обязательно помогут